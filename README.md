## # webfetcher
Cli tool to download website and save html content into file, and optional quality control on fetched file.
## Contents
- [Description](#description)
- [Requirements](#requirements)
- [Installation](#installation)
- [Usage](#usage)

## Description
Part of [Wartracker project](https://github.com/users/F1End/projects/1/views/1?pane=info).

The main funcionality of the script is fetching html data from website.

As secondary functoinality checks are available for confirming that the downloaded content is whole and not corrupted:
- Check HTML structure is correct: check if any unclosed opening/unopened closing tags are present in the file.
- Check size: Based on content length of the file and a file to compare against (can fetch site itself to check against)


## Requirements
Built with python 3.13, but likely older versions also work, at leats from 3.8

The only external requirement is requests library.

## Installation

1. Git clone repo
2. Install reqirements
3. Run with command line

## Usage

Fetching website: fetch.py
parameters:
--url: link to website to be fetched (works for html only)
--output_file: name of saved file. If not triggerd file name is autogenerated based on url
--output_dir: path to save fetched file
--timestamp: If used, a timestamp will be added to the start of the saved file's name.

Command example:
python3 fetch.py --url [https://www.oryxspioenkop.com/2022/02/attack-on-europe-documenting-equipment.html](https://www.oryxspioenkop.com/2022/02/attack-on-europe-documenting-equipment.html) --output_dir ~/scripts/download --timestamp

Running QC checks: check.py
parameters:
--file: local file to check
--tol: size difference tolerance if checked against file or site. If difference is smaller than tolerance, file passes. Defaults to 0.05 (meaning 5% difference is accepted). 
--html_structure: Runs html structure check against file
--against_file: Path to file to check against should follow (triggers size comparison)
--against_site: URL to website to check against should follow (triggers size comparison)


Command examples:
python3 check.py --file my_saved_file.html --html_structure

python3 check.py --file my_saved_file.html --tol 0.15 --against_file data/Archive/file_saved_yesterday.html
